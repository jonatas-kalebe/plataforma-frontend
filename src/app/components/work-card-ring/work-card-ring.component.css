:host {
  --card-w: clamp(160px, 40vmin, 240px);
  --card-h: calc(var(--card-w) * 0.6);
  --ring-viewport: clamp(260px, 80vmin, 320px);
  --font-size: clamp(0.875rem, 2.8vmin, 1.1rem);
  display: block;
}

.ring-wrap {
  perspective: var(--perspective, 1200px);
  display: grid;
  place-items: center;
  width: 100%;
  height: clamp(280px, 80vmin, 420px);
  position: relative;
  overflow: visible;
  touch-action: pan-y pinch-zoom;
}

.ring {
  position: relative;
  transform-style: preserve-3d;
  width: min(100%, var(--ring-viewport));
  height: var(--ring-viewport);
  cursor: grab;
  transform-origin: 50% 50% 0;
  will-change: transform;
  -webkit-user-select: none;
  user-select: none;
}

.ring:active { cursor: grabbing; }

.work-card {
  position: absolute;
  top: 50%;
  left: 50%;
  transform-style: preserve-3d;
  margin-top: calc(-0.5 * var(--card-h));
  margin-left: calc(-0.5 * var(--card-w));
  backface-visibility: visible;
  will-change: transform;
}

.work-card-inner {
  width: var(--card-w);
  height: var(--card-h);
  display: grid;
  place-items: center;
  background: #112240;
  border: 2px solid #64ffda;
  color: #ccd6f6;
  border-radius: 1rem;
  font-size: var(--font-size);
  font-weight: 700;
  overflow: hidden;
  box-shadow:
    0 0 10px rgba(100, 255, 218, 0.3),
    inset 0 0 10px rgba(100, 255, 218, 0.1);
  transform: rotateY(var(--inner-flip, 0deg));
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  backface-visibility: hidden;
}

@media (prefers-reduced-motion: no-preference) {
  .work-card-inner::before {
    content: '';
    position: absolute;
    inset: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(100, 255, 218, 0.12), transparent);
    transform: rotate(45deg);
    animation: lightTrail 4s linear infinite;
    opacity: 0;
    pointer-events: none;
  }
  @keyframes lightTrail {
    0% { transform: translateX(-100%) rotate(45deg); opacity: 0; }
    50% { opacity: 0.3; }
    100% { transform: translateX(100%) rotate(45deg); opacity: 0; }
  }
}

.work-card-inner:hover {
  border-color: #64ffda;
  box-shadow: 0 0 20px rgba(100, 255, 218, 0.5), inset 0 0 15px rgba(100, 255, 218, 0.2);
  transform: rotateY(var(--inner-flip, 0deg)) scale(1.02);
}

@media (prefers-reduced-motion: reduce) {
  .work-card-inner { transition: none; }
}

@media (min-width: 768px) {
  :host {
    --card-w: clamp(200px, 35vmin, 240px);
    --font-size: clamp(1rem, 2.5vmin, 1.1rem);
  }
  .ring-wrap { height: clamp(320px, 70vmin, 420px); }
}

@media (max-width: 768px) {
  :host {
    --card-w: clamp(150px, 60vw, 210px);
    --card-h: calc(var(--card-w) * 0.65);
    --ring-viewport: clamp(220px, 80vw, 300px);
  }

  .ring-wrap {
    height: clamp(240px, 85vw, 360px);
  }
}

@media (max-width: 540px) {
  :host {
    --card-w: clamp(140px, 70vw, 190px);
    --card-h: calc(var(--card-w) * 0.68);
    --ring-viewport: clamp(200px, 90vw, 260px);
    --font-size: clamp(0.8rem, 3.4vw, 0.95rem);
  }

  .ring-wrap {
    height: clamp(220px, 95vw, 320px);
  }
}
